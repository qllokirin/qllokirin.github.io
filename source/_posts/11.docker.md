---
title: docker学习
tags:
  - docker
categories:
  - 记录
description: '最近的比赛要用到docker，去学习了下怎么用，感觉这玩意儿是真的强'
date: 2023-01-09 12:08:33
---

最近的比赛要用到docker，去学习了下怎么用，感觉这玩意儿是真的强

<!-- more -->

# 前言

docker！yyds！真的好用，一键部署

我学习的是这个教程：https://yeasy.gitbook.io/docker_practice

教程里前六章为基础内容讲解比较详细，可以自行阅读，下面记载一下指令方便后续查阅

# 指令

### 镜像

**拉取镜像**

```bash
 docker pull [选项] <域名/IP>[:端口号] <用户名>/<软件名>
 如：
 docker pull ubuntu:18.04
```

**运行镜像**

```bash
docker run -it --rm ubuntu:18.04 bash
```

* `-it`： `-i`：交互式操作，`-t`呼出一个终端

* `--rm`：容器退出后随之将其删除

* `ubuntu:18.04`：这是指用 `ubuntu:18.04` 镜像为基础来启动容器

* `bash`：放在镜像名后的是 **命令**

**列出镜像**

```bash
# 正在运行的
docker image ls
# 所有的
docker image ls -a
```

**删除镜像**

```bash
docker image rm [选项] <镜像1> [<镜像2> ...]
```

**commit构建镜像**

```bash
docker commit [选项] <容器> <命名>

docker commit \
    --author "watashi" \
    --message "修改了xx" \
    webserver \
    nginx:v2
```

> 作者建议使用Dockerfile构建镜像，不推荐commit

### 容器

**新建**

```bash
docker run ubuntu:18.04 /bin/echo 'Hello world'
```

* `-d`：后台运行，`docker container logs <容器>`可以查看输出

**改变容器状态**

```
docker container start/stop <容器> 
```

**进入容器**

```bash
docker attach <容器>
```

使用<kbd>ctrl</kbd>+<kbd>d</kbd>或者`exit`退出时容器会关闭，使用<kbd>ctrl</kbd>+<kbd>p</kbd>然后<kbd>ctrl</kbd>+<kbd>q</kbd>退出时容器不会关闭

```
docker exec -it <容器> bash
```

退出时容器不会关闭

**导出容器**

```bash
docker export <容器id> > ubuntu.tar
```

**导入容器快照**

```bash
docker import <文件>/<url> [命名(可选)]
```

**删除容器**

```bash
 docker container rm <容器>
```

