---
title: N100åŒç½‘å£å°ä¸»æœºä½¿ç”¨dockerç‰ˆopenwrtåšä¸»è·¯ç”±ï¼ˆPPPoEæ‹¨å·ï¼‰è¶…è¯¦ç»†ï¼ï¼ï¼ï¼
tags:
  - openwrt
categories:
  - æ•™ç¨‹
description: 'è¸©äº†å¥½å¤šå¥½å¤šå¤§å‘ï¼Œæ„Ÿè§‰ç”¨N100åœ¨dockerä¸­ä½¿ç”¨openwrtå¹¶ä¸”WANå£è¿›è¡ŒPPPoEæ‹¨å·çš„æ•™ç¨‹ä¸æ˜¯å¤ªå¤šï¼Œç»™æˆ‘æŠ˜ç£¨å®Œäº†'
date: 2024-04-11 23:59:49

---

è¸©äº†å¥½å¤šå¥½å¤šå¤§å‘ï¼Œæ„Ÿè§‰ç”¨N100åœ¨dockerä¸­ä½¿ç”¨openwrtå¹¶ä¸”WANå£è¿›è¡ŒPPPoEæ‹¨å·çš„æ•™ç¨‹ä¸æ˜¯å¤ªå¤šï¼Œç»™æˆ‘æŠ˜ç£¨å®Œäº†

<!-- more -->

# å‰è¨€

æœ€è¿‘å…¥æ‰‹äº†ä¸€ä¸ª 699 åŒç½‘å£çš„ N100 å°ä¸»æœºï¼Œè‡ªå·±æœ‰å†…å­˜å’Œç¡¬ç›˜ï¼Œè£…ä¸Šå°±å¼€å§‹é…·é…·æ¯é¥¬ï¼Œè£…ä¸Š Ubuntu22.04ï¼ŒåŒç½‘å£çš„ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯ openwrtï¼Œå¯åŠ¨ï¼

ç›¸åŒæƒ…å†µçš„æ•™ç¨‹çš„ç¡®æœ‰ç‚¹å°‘ï¼Œé…·é…·è¸©å‘ï¼Œæ„Ÿè§‰å¯èƒ½æ˜¯æ²¡äººç”¨ docker openwrt å½“ä¸»è·¯ç”±ï¼Œè€Œä¸” WAN å£è¿˜æ˜¯ PPPoE æ‹¨å·

å…ˆç½—åˆ—ä¸€ä¸‹å‚è€ƒè¿‡çš„æ•™ç¨‹

**èƒ½ç”¨ï¼Œå¥½ç”¨çš„æ•™ç¨‹**

- [x] https://rupu.net/archives/docker-openwrt

  > ç¥ä¸­ç¥ï¼Œä¸»è·¯ç”±ä¸”åŒç½‘å¡ï¼Œä¸åŒä¹‹å¤„æ˜¯æˆ‘æ˜¯PPPoEæ‹¨å·ä¸Šç½‘ä¸”ä»–çš„lanå£æ˜¯**æ— çº¿ç½‘å¡**ï¼ˆè¿™ä¸ªå¾ˆé‡è¦ï¼Œæœ‰ä¸ªå¤§å‘ï¼‰

- [x] https://blog.csdn.net/qq_38251691/article/details/128356619

  > ç¥ï¼Œ**ä¸€å®šéœ€è¦æ‰‹åŠ¨è®¾ç½® ip åœ°å€å’Œç½‘å…³**ï¼Œå‚è€ƒä¸€äº›æ•™ç¨‹ä¼šè®¾ç½®ä¸º.x.2å®³æ­»æˆ‘äº†ï¼Œç¬¬ä¸€æ¬¡è¿æ¥IPã€å­ç½‘æ©ç ã€ç½‘å…³çš„é™æ€è®¾ç½®éå¸¸é‡è¦ï¼Œå› ä¸ºé•œåƒçš„LANå£é»˜è®¤ä¸ä¼šå¼€å¯DHCPï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®é™æ€IPè¿›å…¥openwrtåå°åå¼€å¯DHCP

- [x] https://blog.csdn.net/gongchenyu/article/details/134724333

  > dockeræ—è·¯ç”±ï¼Œæœ‰å‚è€ƒä»·å€¼ï¼Œæœ‰å®¿ä¸»æœºé€šä¿¡

- [x] https://rehtt.com/index.php/archives/236/

  > å®¿ä¸»æœºé€šä¿¡è¯¦è§£ï¼Œéå¸¸çš„æ£’

- [x] https://post.smzdm.com/p/awzodmpp/

  > IPV6è®¾ç½®ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯[ImmortalWrt](https://github.com/SuLingGG/OpenWrt-Rpi)ï¼ŒWAN6é€‰è®¾å¤‡çš„æ—¶å€™æ²¡æœ‰@WANæˆ–è€…pppoe-WANï¼Œä½†å…¶å®å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶é‡Œé¢æ”¹
  
- [x] https://github.com/lisaac/blog/issues/4#issuecomment-603069862

  > ä¸‰ç½‘å£ï¼ˆå¡ï¼‰åŠä»¥ä¸Šéœ€è¦æ³¨æ„é¡ºåº

**ä¸æˆ‘æƒ…å†µä¸åŒ**

- [ ] https://zhwebsite.com/2024/01/28/%E5%9F%BA%E4%BA%8Edebian-12%EF%BC%8C%E5%88%A9%E7%94%A8docker%E7%9A%84openwrt%E6%90%AD%E5%BB%BA/

  > æ˜¯N100åŒç½‘å£ä½†æ˜¯æŒ‡ä»¤æœ‰é—®é¢˜ä½†æœªæåŠå®¿ä¸»æœºé€šä¿¡é—®é¢˜ï¼Œä¸”ç½‘å…³çš„æŒ‡ä»¤éƒ½ä¼šæŠ¥é”™ï¼ˆä¹Ÿå¯èƒ½æ˜¯æˆ‘Ubuntu22.04è¦æ±‚å¿…é¡».x.0ï¼‰
  
  æ—è·¯ç”±ï¼š
  
  - [ ] https://zy.hn/2023/02/23/deploy-openwrt-with-docker/
  
    > ç»æµ‹è¯•ï¼Œçº¯ç½‘å¡ä¼¼ä¹ä¸èƒ½åšæ—è·¯ç”±ï¼Œçº¯ç½‘çº¿æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘æ“ä½œæœ‰é—®é¢˜
  
  - [ ] https://openwrt.ai/docker%E7%89%88openwrt%E6%97%81%E8%B7%AF%E7%94%B1%E5%AE%89%E8%A3%85%E8%AE%BE%E7%BD%AE%E6%95%99%E7%A8%8B/
  
    ï¼ˆè™½ç„¶è¿™ä¸ªç½‘ç«™çš„é•œåƒæ„å»ºå¾ˆå¥½ç”¨ï¼Œä½†æ˜¯è¿™ç¯‡æ•™ç¨‹æŒ‡ä»¤éƒ½æœ‰é—®é¢˜ï¼‰

# é•œåƒé€‰æ‹©

**1.ä¸‹è½½é•œåƒåå¯¼å…¥**

å®˜ç½‘ï¼šhttps://archive.openwrt.org/releases/23.05.3/targets/

èµ„æºç«™ï¼šhttps://github.com/kiddin9/openwrt-packages

èµ„æºç«™ï¼šhttps://openwrt.ai/?target=x86%2F64&id=genericï¼ˆæœ€ä¸‹é¢ï¼‰

> é€‰`xxx-rootfs.tar.gz`ï¼Œæ˜¯å¯è§£å‹å›ºä»¶,ä¸€èˆ¬ç”¨äºDocker
>
> ```
> gunzip xxx-rootfs.tar.gz
> docker xxx-rootfs.tar openwrt:rootfs
> ```
>
> å¦‚ https://archive.openwrt.org/releases/23.05.3/targets/x86/64/openwrt-23.05.3-x86-64-rootfs.tar.gz

**2.dockeré•œåƒæ‹‰å–**

`docker pull sulinggg/openwrt:x86_64`ï¼Œè¿™ä¸ªé•œåƒè™½ç„¶ä¸ç»´æŠ¤äº†ä½†æ˜¯è¿˜æ˜¯å¾ˆæ£’ï¼Œé¢„è£…äº†å¾ˆå¤šæ’ä»¶ï¼Œæœ¬æ•™ç¨‹ä½¿ç”¨è¿™ä¸ªè¿›è¡Œæ¼”ç¤º

**3.è‡ªå·±ç¼–è¯‘**

# OP å¯åŠ¨ï¼

### ä¸€ã€å¼€å¯ç½‘å£æ··æ‚æ¨¡å¼

**1.æŸ¥çœ‹ç½‘å£åå­—**

```
âœ  ~ ifconfig
enp2s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::c07f:75dc:901a:49b6  prefixlen 64  scopeid 0x20<link>
        ether 00:e0:4c:08:6a:4f  txqueuelen 1000  (ä»¥å¤ªç½‘)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 38  bytes 6249 (6.2 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device memory 0x80c00000-80cfffff  

enp4s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::6bb:2302:767e:7b3d  prefixlen 64  scopeid 0x20<link>
        ether 00:e0:4c:08:6a:50  txqueuelen 1000  (ä»¥å¤ªç½‘)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 35  bytes 5650 (5.6 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device memory 0x80900000-809fffff  

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (æœ¬åœ°ç¯å›)
        RX packets 474  bytes 36598 (36.5 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 474  bytes 36598 (36.5 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

wlp1s0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        ether f8:89:d2:69:42:df  txqueuelen 1000  (ä»¥å¤ªç½‘)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
```

å¦‚ä¸Šï¼Œæˆ‘çš„ç½‘å£æ˜¯`enp2s0`å’Œ`enp4s0`ï¼Œ`wlp1s0`æ˜¯æ— çº¿ç½‘å¡ï¼Œå…ˆä¸ç®¡

æˆ‘è¿™é‡Œé€‰æ‹©`enp2s0`æ˜¯LANå£è´Ÿè´£æœ¬åœ°åˆ†æ´¾IPï¼Œ`enp4s0`ä¸ºWANå£è´Ÿè´£æ‹¨å·ä¸Šç½‘

**2.å¼€å¯ç½‘å£æ··æ‚**

```
sudo ip link set enp4s0 promisc on
sudo ip link set enp2s0 promisc on
```

ç„¶åä¸Šé¢çš„`ifconfig`è¾“å‡ºåé¢ä¼šæ–°å¢`PROMISC`å­—æ®µï¼Œå°±æ˜¯å¼€å¯æˆåŠŸ

```
enp2s0: flags=4419<UP,BROADCAST,RUNNING,PROMISC,MULTICAST>  mtu 1500
enp4s0: flags=4419<UP,BROADCAST,RUNNING,PROMISC,MULTICAST>  mtu 1500
```

**3.å¼€æœºè‡ªè‡ªåŠ¨**

ä¸€é‡å¯ç½‘å£æ··æ‚å°±ä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥éœ€è¦å†™è¿›å¼€æœºè„šæœ¬ï¼Œè¿™é‡Œæˆ‘ç”¨`systemctl`å®ç°

å…ˆå†™è„šæœ¬ï¼Œ`vim /home/{your_name}/sh/network_op.sh`ï¼Œå†™å…¥ä¸‹é¢çš„å†…å®¹ï¼Œ**your_name**æ›¿æ¢æˆä½ çš„

```
sudo ip link set enp4s0 promisc on
sudo ip link set enp2s0 promisc on
```

å†æ–°å»ºsystemï¼Œ`sudo vim /etc/systemd/system/network_op.service`ï¼Œå†™å…¥ä¸‹é¢çš„å†…å®¹ï¼Œ**your_name**æ›¿æ¢æˆä½ çš„

```
[Unit]
Description=Enable op network

[Service]
Type=oneshot
ExecStart=/usr/bin/sh /home/{your_name}/sh/network_op.sh
User=root
Group=root

[Install]
WantedBy=multi-user.target
```

è¿è¡Œä¸€æ¬¡æœåŠ¡å¹¶è®¾ç½®å¼€å¯è‡ªå¯åŠ¨

```
sudo systemctl start network_op
sudo systemctl enable network_op
```

### äºŒã€åˆ›å»ºç½‘ç»œå¹¶å¯åŠ¨OP

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ docker çš„ macvlanï¼Œä»ç‰©ç†ç½‘å£è™šæ‹Ÿå‡ºä¸€ä¸ªæ–°çš„ç½‘å£ï¼Œå¹¶ä¸”æŒ‚è½½è¿› openwrt é•œåƒä¸­

```
# åˆ›å»º LAN å£è™šæ‹Ÿç½‘ç»œï¼ŒæŒ‡å®šç½‘æ®µä¸º 100.xï¼Œç½‘å…³æ˜¯ 100.1ï¼Œè®¾å¤‡ä½¿ç”¨ enp2s0ï¼Œåå­—å« op_lan
# ï¼ˆå¦‚æœè¦ä¿®æ”¹åå­—è¯·çœ‹å®Œä¸Šé¢çš„ã€Šä¸‰ç½‘å£ï¼ˆå¡ï¼‰åŠä»¥ä¸Šéœ€è¦æ³¨æ„é¡ºåºã€‹ï¼‰
docker network create -d macvlan --subnet=192.168.100.0/24 --gateway=192.168.100.1 -o parent=enp2s0 op_lan
# åˆ›å»º WAN å£ç½‘ç»œï¼Œæˆ‘æ˜¯ PPPoE æ‹¨å·æ‰€ä»¥ç½‘å…³ç½‘æ®µä»€ä¹ˆçš„éƒ½ä¸æŒ‡å®šäº†
docker network create -d macvlan -o parent=enp4s0 op_wan
# å¯åŠ¨ docker openwrtï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ sulinggg/openwrt:x86_64 é•œåƒï¼Œè®¾ç½®è‡ªå¯åŠ¨ï¼Œåå­—å« openwrtï¼ŒæŠŠ op_lan è¿æ¥è¿›å»
# æœ‰äº›æ•™ç¨‹ä¼šåœ¨è¿™é‡ŒåŠ ä¸Š --ip ç›´æ¥è®¾ç½®æˆ .100.2ï¼Œä½†æˆ‘æ„Ÿè§‰ op å°±æ˜¯ç½‘å…³ï¼Œæ‰€ä»¥è¿™é‡Œä¸æŒ‡å®šï¼Œç›´æ¥åœ¨ op é‡Œé¢è®¾ç½®ï¼Œå ä½ 100.1çš„ ip
docker run --restart always --name openwrt -d --network op_lan --privileged sulinggg/openwrt:x86_64 /sbin/init
# å†æŠŠ op_wan ä¹Ÿè¿æ¥è¿›å»
docker network connect op_wan openwrt
```

å®é™…è¿‡ç¨‹

```
(base) âœ  python_and_sh docker network create -d macvlan --subnet=192.168.100.0/24 --gateway=192.168.100.1 -o parent=enp2s0 op_lan
e5c68630a0198f2985a7313c68dbcae0165a60b867e8efa6b9694fb39cc42ed2
(base) âœ  python_and_sh docker network create -d macvlan -o parent=enp4s0 op_wan
d284f0d8cde3ac57faae92ab2f2739b4aace7064f7f5bf0556077e51785969e2
(base) âœ  python_and_sh docker run --restart always --name openwrt -d --network op_lan --privileged sulinggg/openwrt:x86_64 /sbin/init
bbe19438aa00be18e2feb1d38ca860a7eeb42e90b756ebaf393f4ce11c7ceac6
(base) âœ  python_and_sh docker network connect op_wan openwrt
(base) âœ  python_and_sh docker network ls
NETWORK ID     NAME      DRIVER    SCOPE
97dae32aa936   bridge    bridge    local
5fca31148366   host      host      local
07b5461851d7   none      null      local
e5c68630a019   op_lan    macvlan   local
d284f0d8cde3   op_wan    macvlan   local
(base) âœ  python_and_sh docker ps -a     
CONTAINER ID   IMAGE                     COMMAND        CREATED          STATUS          PORTS     NAMES
bbe19438aa00   sulinggg/openwrt:x86_64   "/sbin/init"   13 seconds ago   Up 12 seconds             openwrt
```

### ä¸‰ã€é…ç½®LAN&WANç½‘ç»œ

æ¥ä¸‹æ¥è¦è¿›å…¥å®¹å™¨å†…ä¿®æ”¹é…ç½®

```
# è¿›å…¥openwrté•œåƒå†…éƒ¨
docker exec -it openwrt bash
vim /etc/config/network
```

æŠŠ lan æ”¹ä¸ºä¸‹é¢çš„å‚æ•°ï¼Œåˆ æ‰å¤šä½™çš„å­—æ®µ

```
config interface 'lan'
        option type 'bridge'
        option ifname 'eth0'
        option proto 'static'
        option netmask '255.255.255.0'
        option ip6assign '60'
        option ipaddr '192.168.100.1'
```

é‡å¯ç½‘ç»œ

```
/etc/init.d/network restart
```

**ï¼ï¼ï¼ï¼ï¼ç„¶åç¬¬ä¸€ä¸ªå°å‘ï¼Œå›ºä»¶é»˜è®¤ lan å£ä¸å¼€å¯ DHCPï¼Œæ‰€ä»¥æ’ä¸Š lan å£éœ€è¦è‡ªè¡Œè®¾å®š IP å’Œç½‘å…³ï¼ï¼ï¼ï¼ï¼**

![1.png](https://s2.loli.net/2024/04/11/ovJMdKpPZEuaz5x.png)

ç„¶åæµè§ˆå™¨è¾“å…¥`192.168.100.1`å³å¯è¿›å…¥ openwrt çš„åå°ç®¡ç†é¡µé¢

> è¿™ä¹ˆè¯´èµ·æ¥æˆ‘å½“æ—¶ç›´æ¥è¾“äº†æˆ‘è‡ªå·±å¯†ç å°±ç™»è¿›å»äº†ï¼Œéš¾é“ä»–æ˜¯è‡ªåŠ¨æŠŠç¬¬ä¸€æ¬¡è¾“å…¥çš„å¯†ç å½“å¯†ç ï¼Ÿå¦‚æœæ²¡æœ‰çš„è¯å°±è¯•è¯•rootã€passã€passwordä»€ä¹ˆçš„

æˆ‘ä»¬å…ˆæŠŠ **lan å£ DHCP æ‰“å¼€**ï¼Œç½‘ç»œ->æ¥å£->lan->ä¿®æ”¹->æœ€ä¸‹é¢->å¿½ç•¥æ­¤æ¥å£->`å–æ¶ˆå‹¾é€‰`ï¼Œé«˜çº§è®¾ç½®->`å¼ºåˆ¶`ä¹Ÿå‹¾é€‰ä¸Šï¼Œ`ä¿å­˜&åº”ç”¨`

`ç½‘ç»œ`->DHCP/DNS->åŸºæœ¬è®¾ç½®->å–æ¶ˆå‹¾é€‰`é‡ç»‘å®šä¿æŠ¤`ï¼Œ**ä¸ç„¶ä¸€äº›åŸŸåè§£æçš„ç»“æ„æ˜¯`192.x`å’Œ`10.x`çš„ä¿ç•™åœ°å€ä¸ä¼šè¢«è¿”å›ï¼ï¼ï¼ï¼ï¼ï¼**`ä»…æœ¬åœ°æœåŠ¡ä¸š`ä¹Ÿå¯ä»¥å…³äº†

å†**é…ç½® wan å£**ï¼Œæ·»åŠ æ–°æ¥å£

![2.png](https://s2.loli.net/2024/04/11/7lruCSX6k3WsJKM.png)

å¡«å…¥è´¦å·å’Œå¯†ç  **ï¼ï¼ï¼ï¼åœ¨ wan çš„é˜²ç«å¢™è®¾ç½® é€‰ä¸­ wanï¼ï¼ï¼ï¼**ï¼Œä¸ç„¶ä¸€åˆ‡ç«¯å£è½¬å‘éƒ½ä¼šå¤±æ•ˆ

> æœ‰æ—¶å€™ä¼šè‡ªåŠ¨é€‰ä¸­ ä½†æœ‰æ—¶å€™ä¸ä¼š

å¦‚æœå¡ä½å¯ä»¥é‡å¯dockerï¼Œ`docker restart openwrt`

è¿™æ—¶å€™ wan å£å¯ä»¥æ­£å¸¸æ‹¨å·è·å¾— IPï¼ŒLAN å£ä¹Ÿä¼šè‡ªåŠ¨åˆ†é… ip äº†ï¼Œä½†æ˜¯ï¼Œ**å®¿ä¸»æœºæ˜¯æ— æ³•ä½¿ç”¨ç½‘ç»œ**ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®¿ä¸»æœºä¹Ÿåˆ†é…ä¸€ä¸ª`192.168.100.x`çš„åœ°å€

### å››ã€å®¿ä¸»æœºä½¿ç”¨ openwrt çš„ç½‘ç»œ

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ ip æŒ‡ä»¤ç»™ç½‘å¡åˆ›å»º macvlanï¼Œå› ä¸º macvlan çš„å®‰å…¨æœºåˆ¶ï¼Œå®¿ä¸»æœºä¸å®¹å™¨å†…ä¸èƒ½é€šè¿‡ macvlan æ•°æ®äº’é€šï¼Œä½†æ˜¯ macvlan ä¹‹é—´å¯ä»¥äº’é€š

```
# å…ˆåˆ›å»ºä¸€ä¸ªåå« me_to_op çš„ macvlanï¼Œä½¿ç”¨è®¾å¤‡ enp2s0
sudo ip link add me_to_op link enp2s0 type macvlan mode bridge
# æŠŠå®¿ä¸»æœºçš„ ip è®¾ç½®ä¸º 192.168.100.100
sudo ip addr add 192.168.100.100 dev me_to_op
# å¯åŠ¨ me_to_op
sudo ip link set me_to_op up
# æ·»åŠ è·¯ç”±
sudo ip route add 192.168.100.1 dev me_to_op
# ä¿®æ”¹é»˜è®¤è·¯ç”±
sudo route add default gw 192.168.100.1 me_to_op
```

é…ç½®å®Œæˆä¹‹åå°±å¯ä»¥äº’ç›¸ ping

**å®¿ä¸»æœºåˆ° openwrt**ï¼š`ping 192.168.100.1`

**openwrt åˆ°å®¿ä¸»æœº**ï¼š`docker exec -it openwrt bash -c "ping 192.168.100.100 -c 3"`

è¿™æ—¶å€™è·¯ç”±æ­£ç¡®ï¼ˆ`route -n`ï¼‰ä½†æ˜¯**åŸŸåè§£æä¸å¯¹**ï¼Œèƒ½ ping ip ä½†æ˜¯ä¸èƒ½ä¸Šç½‘ï¼Œæˆ‘ä»¬æ¥ç€é…ç½® DNS

```
sudo sh -c 'echo "nameserver 192.168.100.1" > /etc/resolv.conf'
```

> æ”¹` /etc/systemd/resolved.conf`çš„ dns å­—æ®µæ˜¯æ›´åŠ è§„èŒƒçš„æ“ä½œï¼Œä½†æ˜¯æ€•ä»¥åæ¢ç½‘ç»œç¯å¢ƒå¿˜è®°äº†ï¼Œæ‰€ä»¥ç›´æ¥æ”¹`/etc/resolv.conf`

å®¿ä¸»æœºè”ç½‘æµ‹è¯•ï¼š`curl baidu.com`

```
(base) âœ  ~ curl www.baidu.com
<!DOCTYPE html>
<!--STATUS OK--><html> <head><meta http-equiv=content-type content=text/html;charset=utf-8><meta http-equiv=X-UA-Compatible content=IE=Edge><meta content=always name=referrer><link rel=stylesheet type=text/css href=http://........................
```

ä¸ºäº†ä½¿ä¸Šé¢çš„ä¿®æ”¹é‡å¯åä¸€ç›´ç”Ÿæ•ˆï¼Œä¿®æ”¹`/home/{your_name}/sh/network_op.sh`æ–‡ä»¶ä¸ºå¦‚ä¸‹å†…å®¹

```
sudo ip link set enp4s0 promisc on
sudo ip link set enp2s0 promisc on

sudo ip link add me_to_op link enp2s0 type macvlan mode bridge
sudo ip addr add 192.168.100.100 dev me_to_op
sudo ip link set me_to_op up
sudo ip route add 192.168.100.1 dev me_to_op
sudo route add default gw 192.168.100.1 me_to_op

sudo sh -c 'echo "nameserver 192.168.100.1" > /etc/resolv.conf'
```

**Tipsï¼šä¸¤ä¸ªæ€ªé—®é¢˜**

* 1.**LAN å£ä¸æ’ä¸œè¥¿å®¿ä¸»æœºå°± ping ä¸é€š 192.168.100.1**ï¼Œå°±æ˜¯è¿™ä¹ˆçš„ç¥å¥‡ï¼Œå¿…é¡»å¾—è¦ LAN å£æœ‰ä¸€ä¸ªè®¾å¤‡ï¼Œä¸ç„¶å°±æ˜¯ ping ä¸é€šï¼Œæˆ‘çš„ç†è§£æ˜¯ LAN å£ä¸æ’ä¸œè¥¿å°±æ²¡æœ‰è¢«æ¿€æ´»ï¼Œæ‰€ä»¥ä¸Šé¢è®¾ç½®çš„ macvlan æ²¡æœ‰ç”Ÿæ•ˆï¼Œæ¯”å¦‚æ¥ä¸ªç”µè„‘æ˜¯å¯ä»¥çš„ï¼Œæ¥ä¸ªäº¤æ¢æœºï¼ˆäº¤æ¢æœºä¸æ¥å…¶ä»–ä¸œè¥¿ï¼‰ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªè¦ LAN å£ç¯äº®ç€å°±æ˜¯å¯ä»¥çš„ï¼Œæ²¡äº®å°±æ˜¯ä¸è¡Œçš„

  > å…¶å®è¿˜æœ‰ä¸ªæ–¹æ¡ˆæ˜¯ä¸ç”¨`enp2s0`è€Œç”¨`wlp1s0`ï¼Œä¹Ÿå°±æ˜¯ç”¨ç½‘å¡å¼€ä¸€ä¸ªmacvlanï¼Œç„¶åå°±ä¸ç”¨ä¸€ç›´æ’ä¸€ä¸ªä¸œè¥¿äº†
  >
  > ```
  > sudo ip link set enp4s0 promisc on
  > sudo ip link set enp2s0 promisc on
  > sudo ip link set wlp1s0 promisc on
  > sleep 10
  > 
  > sudo ip link del me_to_op
  > sudo ip link add me_to_op link wlp1s0 type macvlan mode bridge
  > sudo ip addr add 192.168.200.200 dev me_to_op
  > sudo ip link set me_to_op up
  > sudo ip route add 192.168.200.1 dev me_to_op
  > sudo route add default gw 192.168.200.1 me_to_op
  > sudo sh -c 'echo "nameserver 192.168.200.1" > /etc/resolv.conf'
  > ```
  >
  > è¿™é‡ŒåŠ äº†`sleep 10`æ˜¯å› ä¸ºä¸çŸ¥é“ä¸ºå•¥ä¼šè®¾ç½®ä¸æˆåŠŸï¼ŒåŠ ä¸Šå°±å¥½äº†

* 2.**LAN å£ä¸‹çš„ç½‘ç»œä¸èƒ½æ­£å¸¸è®¿é—®åŸŸåè§£æåˆ° WAN å£ IP ä¸Šçš„å†…å®¹**ï¼Œå…·ä½“ç‚¹æ¥è¯´æ˜¯ï¼Œæˆ‘çš„ openwrt çš„ 80 ç«¯å£è½¬å‘åˆ°äº†å®¿ä¸»æœº`192.168.100.100`çš„ 80 ä¸Šï¼Œç„¶åç”± nginx åä»£ï¼Œ`op.xx.xx`ä»£ç†åˆ° op çš„ç®¡ç†é¡µé¢ï¼Œ`files.xx.xx`ä»£ç†åˆ° GoWebDav ä¸Šï¼Œè·Ÿ WAN å£åŒç½‘æ®µçš„`10.x.x.x.`çš„è®¾å¤‡å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ LAN å£ä¸‹çš„è®¾å¤‡ç”¨åŸŸåä¸èƒ½è®¿é—®ï¼Œè€Œç›´æ¥ç«¯å£ + IP æ˜¯å¯ä»¥çš„ï¼Œéœ€è¦åšå¦‚ä¸‹æ”¹åŠ¨ï¼ˆæ˜¯ä¸æ¡¥æ¥ç½‘ç»œè¿‡æ»¤å™¨æœ‰å…³çš„å†…å®¹ï¼Œå…·ä½“åŸå› ä¸æ˜¯å¾ˆæ¸…æ¥šï¼‰

  ```
  1.sshè¿æ¥openwrtç³»ç»Ÿåï¼Œç¼–è¾‘/etc/sysctl.d/11-br-netfilter.confæ–‡ä»¶ã€‚
  net.bridge.bridge-nf-call-arptables=0
  net.bridge.bridge-nf-call-ip6tables=0
  net.bridge.bridge-nf-call-iptables=0
  ç¡®è®¤åé¢çš„å€¼æ˜¯0ï¼Œå¦‚æœä¸æ˜¯ï¼Œéœ€è¦æ”¹ä¸º0
  2.ç¼–è¾‘/etc/sysctl.confæ–‡ä»¶ã€‚æ–‡ä»¶å†…å®¹å¯èƒ½æ˜¯ç©ºçš„ï¼ŒæŠŠä¸Šé¢çš„å†…å®¹å¤åˆ¶è¿›sysctl.confæ–‡ä»¶ï¼Œä¿å­˜é€€å‡ºã€‚
  3.sshå†…è¾“å…¥sysctl -på‘½ä»¤ï¼ŒæŸ¥çœ‹è¾“å‡ºç»“æœæ˜¯ä¸æ˜¯ä¸Šé¢æåˆ°çš„é‚£ä¸‰è¡Œå†…å®¹ã€‚
  4.é‡å¯
  ```

> å‚è€ƒæ•™ç¨‹ï¼šhttps://www.right.com.cn/forum/forum.php?mod=redirect&goto=findpost&ptid=8192269&pid=16637078
>
> éƒ¨åˆ†æ•™ç¨‹æåŠäº† 80 ç«¯å£è½¬å‘çš„`NAT ç¯å›`ï¼Œ**è¯·å‹¿å…³é—­**
>
> ```
> NATç¯å›ï¼ˆNAT loopbackï¼‰æ˜¯æŒ‡åœ¨ç½‘ç»œä¸­ä½¿ç”¨ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰æ—¶ï¼Œå½“å†…éƒ¨ä¸»æœºå°è¯•é€šè¿‡å…¶å¤–éƒ¨å…¬å…±IPåœ°å€è®¿é—®åœ¨åŒä¸€å†…éƒ¨ç½‘ç»œä¸­çš„å¦ä¸€å°ä¸»æœºæ—¶å‘ç”Ÿçš„æƒ…å†µã€‚ç®€å•æ¥è¯´ï¼Œå½“å†…éƒ¨ä¸»æœºè¯•å›¾é€šè¿‡å…¬å…±IPåœ°å€è®¿é—®è‡ªå·±æ‰€åœ¨çš„å†…éƒ¨ç½‘ç»œä¸­çš„å¦ä¸€å°ä¸»æœºæ—¶ï¼Œæ•°æ®åŒ…è¢«NATè·¯ç”±å™¨æ¥æ”¶å¹¶é‡æ–°å‘é€ç»™å†…éƒ¨ç½‘ç»œä¸­çš„ç›¸åº”ä¸»æœºï¼Œè¿™ç§æƒ…å†µå°±è¢«ç§°ä¸ºNATç¯å›ã€‚è¿™ç§è¡Œä¸ºå¯èƒ½ä¼šå½±å“ç½‘ç»œæ€§èƒ½å’Œè¡Œä¸ºï¼Œå› æ­¤éœ€è¦åœ¨NATè·¯ç”±å™¨ä¸Šè¿›è¡Œé€‚å½“çš„é…ç½®æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚
> ```
>
> ä¸€æ—¦å…³é—­`NAT ç¯å›`ï¼Œæ‰€æœ‰çš„è®¿é—®åˆ° WAN çš„ IP ä¼šç›´æ¥æ‰“åˆ° op åå°ï¼Œä¸ä¼šè¢«ç«¯å£è½¬å‘ï¼Œå®¿ä¸»æœºä¸Šçš„ nginx å°†æ— æ³•ç”Ÿæ•ˆ

### äº”ã€æ’ä»¶&å…¶ä»–ä¸€äº›ä½¿ç”¨

---

#### ç³»ç»Ÿ

**1.ç®¡ç†æƒ**

`Dropbear å®ä¾‹`æŒ‰éœ€ä¿®æ”¹

**2.æŒ‚è½½ç‚¹&å¯åŠ¨é¡¹**

æˆ‘è¿™é‡Œéœ€è¦æŒä¹…åŒ–æŒ‚è½½ä¸€å—ç¡¬ç›˜åˆ° openwrt é‡Œé¢ï¼Œè¯•äº†ä¸‹æŒ‚è½½ç‚¹çš„æ“ä½œä¸ç”Ÿæ•ˆï¼Œæˆ‘å°±ç›´æ¥æŠŠ`mount /dev/sda1 /mnt/sda1`å†™åˆ°å¯åŠ¨é¡¹æœ€ä¸‹é¢çš„æœ¬åœ°å¯åŠ¨è„šæœ¬é‡Œé¢äº†

---

#### æœåŠ¡

**1.å¾®ä¿¡æ¨é€**

å¾®ä¿¡pushplusä¸é™åˆ¶æ¡æ•°ï¼Œå¥½ç”¨ã€‚ä½†åœ¨ op çš„å®é™…æ¨é€ä¸­æ„Ÿè§‰ç”¨å¤„ä¸å¤§ï¼ŒIPV4 å’Œ IPV6 å˜åŠ¨å¯ä»¥ç”¨ DDNSè§£å†³ã€‚

**2.DDNS/åŠ¨æ€DNS**

ä¿®æ”¹->å¯ç”¨ï¼Œç„¶åæŒ‰éœ€ä¿®æ”¹å³å¯ï¼Œæˆ‘è¿™é‡Œ IPV4 æ¥æºé€‰çš„æ˜¯`æ¥å£`->`pppoe-wan`ï¼Œ`æŸ¥è¯¢ä¸»æœºå`å’Œ`åŸŸå`éƒ½ç›´æ¥å¡«`xxx.xxx.xxx`å°±è¡Œï¼ŒæˆåŠŸé…ç½®å`ä¸Šæ¬¡æ›´æ–°` `ä¸‹æ¬¡æ›´æ–°`é‚£ä¼šå˜æˆä¸¤è¡Œæ—¶é—´ï¼Œå‡ºç°é—®é¢˜å¯ä»¥æŸ¥çœ‹æ—¥å¿—

> å¦‚æœä½ çš„åŸŸåæ˜¯`192.x`æˆ–`10.x`ç­‰ä¿ç•™åœ°å€ï¼Œå…¨å±€è®¾ç½®->`å…è®¸éå…¬ç½‘ IP`**ä¸€å®šè¦å‹¾é€‰ä¸Šï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼**

---

####  NAS

**1.GoWebDav**

ç®€å•ä½¿ç”¨ï¼Œç‚¹å‡»å³ç”¨ï¼Œä½†æ˜¯æœ‰ä¸ªå¼€å…³å«`åªè¯»æ¨¡å¼`ï¼Œä½†æ˜¯æˆ‘æ²¡å‘ç°åº”è¯¥æ€ä¹ˆå¾€ä¸Šä¸Šä¼ ğŸ˜­

**2.ç½‘ç»œå…±äº«**

Sambaï¼Œå¥½ç”¨ï¼Œè¸©äº†ç‚¹å°å‘ï¼Œ**å¦‚æœè¦åœ¨ WAN å£åŒç½‘æ®µä¸‹ä½¿ç”¨éœ€è¦æŠŠ 445 å’Œ 139 ç«¯å£è½¬å‘åˆ°å†…éƒ¨ 192.168.100.1 çš„ 445 å’Œ 139**ï¼Œ[æ’é”™å‚è€ƒæ•™ç¨‹](https://www.cnblogs.com/chentiao/p/16696051.html)

å…ˆè¿›è¡Œå‘½ä»¤è¡Œæ“ä½œï¼š

```
# æ›´æ–°æº
opkg update
# å®‰è£…è½¯ä»¶
opkg install shadow-common
opkg install shadow-useradd
# æ·»åŠ åå«smbkirinçš„ç”¨æˆ·
useradd smbkirin
# ä¸ºsmbkirinè®¾ç½®å¯†ç 
passwd smbkirin
# æ·»åŠ smbkirinåˆ°Sambaä¸­
smbpasswd -a smbkirin
# é‡å¯Samba
service samba restart
```

ç„¶ååœ¨ç½‘é¡µæ§åˆ¶ç•Œé¢ä¸­æ·»åŠ æ–‡ä»¶å¤¹ï¼Œåç§°éšä¾¿å–ï¼Œè·¯å¾„çœ‹ä½ å®šï¼Œç”¨æˆ·ç”¨ä¸Šé¢çš„ï¼Œæ–°æ–‡ä»¶0666ï¼ˆå¯è¯»å¯å†™ä¸å¯æ‰§è¡Œï¼‰ï¼Œç›®å½•0777

Windows ä¸‹è½½èµ„æºç®¡ç†å™¨è¾“å…¥`\\{IP}`å³å¯è®¿é—®ï¼Œå¯ä»¥æ˜ å°„åˆ°ç½‘ç»œé©±åŠ¨å™¨æ–¹ä¾¿ä½¿ç”¨

---

#### å…¶ä»–çš„

**1.ä½¿ç”¨IPV6**

> å¦‚æœä½ çš„ç½‘ç»œä¸å‘æ”¾ IPV6ï¼Œæ”¹äº†ä¹Ÿæ²¡æœ‰çš„

åœ¨ openwrt ä¸­å®‰è£…ç»„ä»¶

```
opkg update
opkg install ipv6helper
```

ä¿®æ”¹`vim /etc/config/network`è¿½åŠ å¦‚ä¸‹å†…å®¹

```
config interface 'wan6'
        option proto 'dhcpv6'
        option ifname 'pppoe-wan'
        option reqaddress 'try'
        option reqprefix 'auto'
```



è¯¦ç»†è§£é‡Š ipv6ï¼šhttps://post.smzdm.com/p/awzodmpp/

> å¦‚æœè¦å®ç° ipv6 è½¬å‘åˆ° ipv4 ç«¯å£ï¼Œsocatè½¯ä»¶åŒ…èƒ½ç›´æ¥åœ¨`è½¯ä»¶åŒ…`é‡Œé¢ç‚¹ä¸€ä¸‹å®‰è£…ï¼Œ[socat æ•™ç¨‹](https://zhuanlan.zhihu.com/p/559034124)
>
> å¦‚æœè¦ç›‘å¬ 80 å’Œ 443 ç«¯å£ï¼Œå› ä¸ºè¢«`uhttpd`å ä½äº†æ‰€ä»¥éœ€è¦æ”¹ä¸€ä¸‹è®¾ç½®ï¼Œè®©`uhttpd`ä¸ç›‘å¬ IPV6 åœ°å€
>
> ```
> # æŸ¥çœ‹uhttpç›‘å¬æƒ…å†µ
> netstat -tlnp | grep uhttpd
> # ä¿®æ”¹é…ç½®ï¼Œæ³¨é‡Šæ‰ipv6çš„ç›‘å¬
> vi /etc/config/uhttpd
> # é‡å¯uhttpd
> /etc/init.d/uhttpd restart
> # å†æ¬¡æŸ¥çœ‹
> netstat -tlnp | grep uhttpd
> ```
>
> å¦‚æœè¦åœ¨ LAN ç½‘ç»œä¸‹ä½¿ç”¨ IPV6 åŸŸåè§£æï¼Œ`ç½‘ç»œ`->`DHCP/DNS`->`é«˜çº§è®¾ç½®`->`ç¦æ­¢è§£æ IPV6 DNS è®°å½•`
>
> æµ‹è¯•ç«¯å£é€šæ–­`nmap -6 {IPV6 åœ°å€} -p 80,4438080,20000,30004 -Pn`
>
> clash å¼€ç€ä¼šå½±å“ ipv6 åœ°å€çš„è®¿é—®ï¼Œæ— æ•Œäº†ï¼Œåé¢å‘ç°åŸå› æ˜¯ä¼šåŸŸåä»£ç†ï¼Œå¦‚æœä½ ä¹°çš„æœºåœºçš„è¿™ä¸ªèŠ‚ç‚¹æœ‰ IPV6ï¼Œç”šè‡³å¯ä»¥ç”¨ä»£ç†è„¸ä¸Šï¼Œå³ä½¿ä½ è‡ªå·±æ²¡æœ‰ IPV6 ç½‘ç»œ
>
> ä¸çŸ¥é“ä¸ºå•¥æˆ‘çš„ IPV6 é˜²ç«å¢™æ²¡ç”Ÿæ•ˆï¼Œå¯ä»¥ç›´æ¥è®¿é—®å†…ç½‘çš„è®¾å¤‡ï¼Œå‘ç° IPV4 ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œé˜²ç«å¢™æ²¡æœ‰é˜»æ–­ï¼Œæœ‰ç‚¹å¥‡æ€ªï¼Œ[è¿™ä¸ªæ•™ç¨‹](https://zhuanlan.zhihu.com/p/620831429)æœ‰ nmap ä½¿ç”¨æ–¹æ³•ï¼Œå“ä¸ç®¡äº†ï¼Œå¼€å°±å¼€å§

**2.åŠ å…¥æ— çº¿ç½‘å¡**

> é¢˜å¤–è¯ä¸€å¥ï¼Œæˆ‘ä¹°çš„ N100 è‡ªå¸¦ AX101 ç½‘å¡ï¼Œæ˜¯ WiFi6 ä½†æ˜¯å¾ˆåƒåœ¾ ï¼Œæœ€é‡è¦çš„æ˜¯å®˜æ–¹æ²¡æœ‰é€‚é…é©±åŠ¨ï¼Œåœ¨ Ubuntu22.04 ç³»ç»Ÿä¸Šå¼€æœºå³å¯ä½¿ç”¨ï¼Œä½†æ˜¯å¸¦å®½ç”šè‡³è·‘ä¸æ»¡ç™¾å…†ï¼Œä¸ªäººçŒœæµ‹æ˜¯è¯†åˆ«æˆäº†å…¶ä»–ç½‘å¡èƒ½ç”¨ä½†æ˜¯è°ƒåº¦ä¸å¥½ï¼Œè·‘ä¸æ»¡åƒå…†ä¹Ÿèƒ½ç†è§£ï¼Œä½†æ˜¯è·‘ä¸æ»¡ç™¾å…†å°±æœ‰ç‚¹ç¦»è°±äº†ã€‚
>
> æœ€åä»å®¤å‹çš„æ³¡æ°´æœºä¸Šå–äº†ä¸ª MT7921ï¼Œæ— çº¿å‘å°„å¸¦å®½å®æµ‹åˆšå¥½ 100Mï¼Œèƒ½ç”¨è¿˜è¡Œ

æœ‰å°è¯•ä½¿ç”¨ macvlan ç­‰æ“ä½œæŒ‚è¿› openwrtï¼Œä¸è¿‡æƒ³äº†æƒ³å¥½åƒç”¨å¤„ä¸å¤§ï¼Œæœ€ç»ˆçš„æ–¹æ³•æ˜¯ç›´æ¥å¼€ä¸€ä¸ªçƒ­ç‚¹ï¼ŒæŠŠ`192.168.100.100`è·å¾—çš„ç½‘ç»œå…±äº«å‡ºå»

```
# ä½¿ç”¨nmcliå¯ç”¨WiFi
sudo nmcli device wifi hotspot ifname {ç½‘å¡åç§°ï¼Œå¦‚wlp1s0} con-name {åœ¨nmä¸­çš„åå­—} ssid {WiFiåå­—} password {å¯†ç }
# å¦‚ä¸‹
# sudo nmcli device wifi hotspot ifname wlp1s0 con-name nmcli-wifi ssid n100-wifi password 123456789
```

> ä¹Ÿæ˜¯é‡å¯ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥åŠ å…¥ä¹‹å‰å†™çš„å¼€æœºè„šæœ¬é‡Œ

**æœ€ç»ˆçš„è„šæœ¬å†…å®¹**ï¼Œä¸ºäº†ä»¥é˜²ä¸‡ä¸€åˆåŠ å…¥äº†ä¸¤å¥åˆ é™¤æŒ‡ä»¤`sudo ip link del me_to_op`  å’Œ `nmcli connection delete nmcli-wifi`

```
sudo ip link set enp4s0 promisc on
sudo ip link set enp2s0 promisc on

sudo ip link del me_to_op
sudo ip link add me_to_op link enp2s0 type macvlan mode bridge
sudo ip addr add 192.168.100.100 dev me_to_op
sudo ip link set me_to_op up
sudo ip route add 192.168.100.1 dev me_to_op
sudo route add default gw 192.168.100.1 me_to_op

sudo sh -c 'echo "nameserver 192.168.100.1" > /etc/resolv.conf'

sudo nmcli connection delete nmcli-wifi
sudo nmcli device wifi hotspot ifname wlp1s0 con-name nmcli-wifi ssid n100-wifi password 123456789
```

å› ä¸ºä½¿ç”¨çš„æ˜¯çƒ­ç‚¹ï¼Œæ‰€ä»¥`ifconfig`ä¸­æ— çº¿ä¼šå˜æˆä¸€ä¸ª`10.x`çš„ç½‘æ®µï¼Œé“¾æ¥ä¸ŠWiFiçš„è®¾å¤‡ä¹Ÿä¼šè·å¾—`10.x`çš„ç½‘æ®µï¼Œä¸è¿‡è·Ÿæˆ‘çš„ WAN å£åœ°å€ä¸å†²çªï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±ä¸ç®¡äº†ï¼Œåº”ä¹Ÿè¯¥å¯ä»¥æ”¹ç½‘æ®µçš„ã€‚**ï¼ˆåè®°ï¼šè¿™æ ·ä¼¼ä¹èƒ½è¿ä¸Šä½†ä¸èƒ½ä¸Šç½‘ï¼Œæˆ‘å·²ç»æ¢æˆä¸‹é¢çš„æ–¹å¼äº†ï¼‰**

> **å¦‚æœè¦æŠŠ WiFi æŒ‚è¿› openwrt è€Œéä¸Šé¢é‚£æ ·ï¼Œåˆ™éœ€æ“ä½œå¦‚ä¸‹**
>
> **å…ˆæŒ‰ä¸Šé¢çš„æ–¹æ³•æŠŠ WiFi æ‰“å¼€åå†ä½¿ç”¨ä¸‹é¢çš„æ“ä½œ**
>
> ```
> docker network create -d macvlan --subnet=192.168.200.0/24 --gateway=192.168.200.1 -o parent=wlp1s0 op_wifi
> docker network connect op_wifi openwrt
> ```
>
> ä¿®æ”¹`/etc/config/network`
>
> ```
> config interface 'lanwifi'
>      option type 'bridge'
>      option ifname 'eth2'
>      option proto 'static'
>      option netmask '255.255.255.0'
>      option ip6assign '60'
>      option ipaddr '192.168.200.1'
> ```
>
> åŒæ ·è®¾ç½®é˜²ç«å¢™åˆ° LAN
>
> ä¼¼ä¹è¿™æ ·åšé“¾æ¥ä¸Š WIFI çš„è®¾å¤‡å…ˆä¼šå¾—åˆ°`10.x`çš„ IPï¼Œç„¶åå˜æˆä¸€ä¸ª`192.168.200.x`çš„ IPï¼Œæˆ‘æ„Ÿè§‰åº”è¯¥æ‰¾ä¸€æ‰¾ WiFi çƒ­ç‚¹èƒ½å‘é€ä½†æ˜¯ä¸åˆ†é… IP çš„æ–¹æ¡ˆï¼Œç„¶åç›´æ¥è®© op æ¥å‘ IPï¼Œè·Ÿ LAN å°±ä¸€æ ·çš„äº†ï¼Œè€Œä¸”è¿™æ ·å°±ä¸ä¼šåƒ LAN ä¸€æ ·è¿˜çš„æ’ä¸ªä¸œè¥¿æ‰èƒ½å·¥ä½œã€‚æˆ–è®¸è¿˜å¯ä»¥è€ƒè™‘ä¸€ä¸‹éƒ½åˆ†è¿› 100 ç½‘æ®µé‡Œé¢ï¼Œä¸¤ä¸ª DHCP æœåŠ¡å™¨å„å‘å„çš„ï¼Œæˆ–è®¸ä¹Ÿä¸ä¼šå†²çªï¼Ÿ

# åè®°

ä»è´­å…¥åˆ°ä»Šå¤©åˆšå¥½åå¤©ï¼Œç»ˆäºæ¯é¥¬çš„å·®ä¸å¤šäº†ï¼Œçˆ½ï¼ä»æ˜¨å¤©å¼€å§‹ç‹‚å†™ 4K å­—çš„æ•™ç¨‹ï¼Œå¿…é¡»ç‹ ç‹ åœ°è®°å½•ï¼æˆ‘ç»ˆå°†æˆä¸º op é«˜æ‰‹ï¼

ä»¥åŠæ„Ÿè°¢ [zzsqwq](https://blog.zzsqwq.cn/) çš„åˆ†ææ’é”™ï¼Œç¥ï¼è¿˜æœ‰ KirCute çš„ä¸€é—®ï¼šâ€œè¿™ç¯æ€ä¹ˆæ²¡äº®â€ï¼Œä»è€Œæƒ³åˆ° LAN å£ä¸æ’ä¸œè¥¿å°±ä¸å·¥ä½œï¼Œæ— æ•Œï¼

> æœ€åçœ‹åˆ°è¿™ä¸ªè§†é¢‘[ã€æ­£ç‰‡ã€‘é¢å¯¹æ ¡å›­ç½‘çš„å¤šè®¾å¤‡æ£€æµ‹ï¼Œã€Œæˆ‘ã€çš„è§£å†³æ–¹æ¡ˆæ˜¯â€”â€”](https://www.bilibili.com/video/BV1yr4meeENt/) çœŸçš„å¾ˆå¼ºå•Š
