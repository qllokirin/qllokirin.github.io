---
title: tmux的学习记录
tags:
  - tmux
categories:
  - 记录
description: '浅浅记录tmux学习内容'
date: 2022-10-06 18:10:55
---

记录tmux学习内容

<!-- more -->

# tmux的学习记录

前言：远程连接上位机只有一个窗口，但是要运行多个指令才能把任务跑起来，所以需要会话多开，tmux是个不错的选择

## 基本操作指令记录

```zsh
# 新开一个窗口
tmux new -s <session-name>
# 结束并退出当前窗口
exit        (Ctrl+d)
# 退出但保存当前窗口
tmux detach    (Ctrl+b  d)
# 重新连接到已经有的窗口
tmux attach -t <session-name>
# 显示当前所有窗口
tmux ls
```

## 快捷键

```zsh
Ctrl+b %  划分左右两个窗格
Ctrl+b "  划分上下两个窗格
Ctrl+b 箭头  光标切换到其他窗格
```

### tmux脚本

这里提供一个最简单的示例

```sh
#!/bin/bash
## tmux new -s <window-name> 创建一个会话
## -d是在后台创建（重要 没有这个参数会有bug）
tmux kill-session -t start
tmux new -d -s start

## 分割成四块
tmux split-window -h -t start
tmux split-window -v -t start.0
tmux split-window -v -t start.2

## 填入指令 0是左上 1是坐下 2是右上 3是右下
tmux send -t start.0 " " 
tmux send -t start.1 " " 
tmux send -t start.2 " " 
tmux send -t start.3 " " 
## 显示刚刚创建的会话
tmux a -t start
```

使用方法：新建一个`tmux.sh`的文件，将内容写入，执行`chmod +x tmux.sh`变为可执行文件，`./tmux.sh`运行

### tmux设置鼠标启动

```
echo "set-option -g mouse on" >> ~/.tmux.conf
tmux source-file ~/.tmux.conf
```

## 使用systemctl开机启动tmux界面时

请注意一定要使用`Type=forking`，不然进程会被杀死，forking才运行创建的子进程存活

```
[Unit]
Description=开机任务执行脚本
After=network.target

[Service]
Type=forking
ExecStart=/bin/bash /home/qllokirin/python_and_sh/tmux.sh
User=qllokirin

[Install]
WantedBy=multi-user.target
```

